<style>
    .tabela-container { background: white; padding: 20px; border-radius: 12px; margin-top: 30px; width: 90%; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
    table { width: 100%; border-collapse: collapse; margin-top: 15px; }
    th { text-align: left; border-bottom: 2px solid #eee; padding: 10px; color: #7f8c8d; }
    td { padding: 12px; border-bottom: 1px solid #eee; }
    .status-critico { color: #e74c3c; font-weight: bold; background: #fdeaea; padding: 4px 8px; border-radius: 4px; }
    .status-ok { color: #27ae60; }
    .vencido { background: #f39c12; color: white; padding: 2px 5px; border-radius: 3px; }
</style>

<div class="tabela-container">
    <h2>üì¶ Invent√°rio Completo</h2>
    <table>
        <thead>
            <tr>
                <th>Produto</th>
                <th>Estoque Atual</th>
                <th>Vencimento</th>
                <th>Status Reposi√ß√£o</th>
            </tr>
        </thead>
        <tbody id="corpoInventario">
            </tbody>
    </table>
</div>

<script>
    async function carregarInventario() {
        const res = await fetch('http://localhost:3000/api/inventario');
        const produtos = await res.json();
        const corpo = document.getElementById('corpoInventario');
        corpo.innerHTML = '';

        produtos.forEach(p => {
            // L√≥gica de Reposi√ß√£o: Menos de 10 unidades √© cr√≠tico
            const statusReposisao = p.estoque < 10 
                ? '<span class="status-critico">REPOR URGENTE</span>' 
                : '<span class="status-ok">Estoque OK</span>';

            // L√≥gica de Vencimento simples
            const dataVencimento = p.vencimento ? new Date(p.vencimento).toLocaleDateString() : 'N√£o inf.';
            const hoje = new Date();
            const vencimentoData = new Date(p.vencimento);
            const classeVencimento = (vencimentoData < hoje && p.vencimento) ? 'class="vencido"' : '';

            corpo.innerHTML += `
                <tr>
                    <td>${p.nome}</td>
                    <td>${p.estoque} un</td>
                    <td ${classeVencimento}>${dataVencimento}</td>
                    <td>${statusReposisao}</td>
                </tr>
            `;
        });
    }
    // Chame a fun√ß√£o ao carregar a p√°gina
    carregarInventario();
</script>